(function(){"use strict";var e=typeof window=="undefined"?global:window;if(typeof e.require=="function")return;var t={},n={},r={}.hasOwnProperty,i={},s=function(e,t){return e.indexOf(t,e.length-t.length)!==-1},o=function(e,t){var n=0;t&&(t.indexOf(!1)&&(n="components/".length),t.indexOf("/",n)>0&&(t=t.substring(n,t.indexOf("/",n))));var r=i[e+"/index.js"]||i[t+"/deps/"+e+"/index.js"];return r?"components/"+r.substring(0,r.length-".js".length):e},u=function(){var e=/^\.\.?(\/|$)/;return function(t,n){var r=[],i,s;i=(e.test(n)?t+"/"+n:n).split("/");for(var o=0,u=i.length;o<u;o++)s=i[o],s===".."?r.pop():s!=="."&&s!==""&&r.push(s);return r.join("/")}}(),a=function(e){return e.split("/").slice(0,-1).join("/")},f=function(t){return function(n){var r=u(a(t),n);return e.require(r,t)}},l=function(e,t){var r={id:e,exports:{}};return n[e]=r,t(r.exports,f(e),r),r.exports},c=function(e,i){var s=u(e,".");i==null&&(i="/"),s=o(e,i);if(r.call(n,s))return n[s].exports;if(r.call(t,s))return l(s,t[s]);var a=u(s,"./index");if(r.call(n,a))return n[a].exports;if(r.call(t,a))return l(a,t[a]);throw new Error('Cannot find module "'+e+'" from '+'"'+i+'"')};c.alias=function(e,t){i[t]=e},c.register=c.define=function(e,n){if(typeof e=="object")for(var i in e)r.call(e,i)&&(t[i]=e[i]);else t[e]=n},c.list=function(){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e},c.brunch=!0,e.require=c})(),require.register("app",function(e,t,n){function I(e,t){function n(){}return n.prototype=(e.superclass=t).prototype,(e.prototype=new n).constructor=e,typeof t.extended=="function"&&t.extended(e),e}function q(e,t){var n={}.hasOwnProperty;for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e}function R(e,t){var n=-1,r=t.length>>>0;while(++n<r)if(e===t[n])return!0;return!1}var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F;r=t("./weblib"),i=r.mkRealtimeInput,s=r.mkRadiobox,o=r.test,u=r.stateOf,a=r.radioboxHandler,f=r.radioboxListenerHandler,l=r.connectEnterToClick,c=prelude.flatten,h=prelude.initial,p=prelude.drop,d=prelude.join,v=prelude.concat,m=prelude.tail,g=prelude.head,y=prelude.map,b=prelude.zip,w=prelude.split,E=prelude.union,S=window.location.href,x=S.split("/"),T=x[0]+"//"+x[2],N=[""].concat(h(p(3,x)),["socket.io"]),N=d("/",N),C=io.connect(T,{path:N}),k=function(){function n(){var e=this instanceof r?this:new r;return e.actorId=uuid4(),e}function r(){}n.displayName="ActorBase";var e=n.prototype,t=n;return r.prototype=e,e.receive=function(e){},e.recv=function(e){var t;this.receive(e);try{return this["handle_"+e.cls](e)}catch(n){return t=n}},n}(),L=function(){function i(){var n=this instanceof s?this:new s;return e==null&&(e=t()),e}function s(){}i.displayName="ActorManager";var e,t,n=i.prototype,r=i;return e=null,s.prototype=n,t=function(e){function r(){var e=this instanceof i?this:new i;return r.superclass.apply(e,arguments),e.actorList=[],e}function i(){}var t=I((q(r,e).displayName="SingletonClass",r),e).prototype,n=r;return i.prototype=t,t.register=function(e){return this.actorList=this.actorList.concat([e])},t.inboxPut=function(e){var t,n,r,i,s=[];e.sender=e.sender.concat([this.actorId]);for(t=0,r=(n=this.actorList).length;t<r;++t)i=n[t],R(i.actorId,e.sender)||s.push(i.recv(e));return s},r}(k),i}(),A=function(e){function r(e){var t=this instanceof i?this:new i;return r.superclass.apply(t,arguments),t.mgr=L(),t.mgr.register(t),t.name=e,t}function i(){}var t=I((q(r,e).displayName="Actor",r),e).prototype,n=r;return i.prototype=t,t.send=function(e){return e=this.fillMsg(e),e.sender=e.sender.concat([this.actorId]),this.mgr.inboxPut(e)},t.copyMsg=function(e){return JSON.parse(JSON.stringify(e))},t.fillMsg=function(e){var t;return t=Object.keys(e)[0],e=this.copyMsg(e[t]),e.cls=t,e.sender==null&&(e.sender=[]),e.timestamp==null&&(e.timestamp=Date.now()/1e3||0),e.msg_id=uuid4(),e},r}(k),O=function(){function i(){var n=this instanceof s?this:new s;return e==null&&(e=t()),e}function s(){}i.displayName="ProxyActor";var e,t,n=i.prototype,r=i;return e=null,s.prototype=n,t=function(e){function r(){var e=this instanceof i?this:new i;return r.superclass.apply(e,arguments),e.socket=C,e.socket.on("aktos-message",function(t){var n;try{return e.networkRx(t)}catch(r){return n=r,console.log("Problem with receiving message: ",n)}}),e.connected=!1,e.socket.on("connect",function(){e.connected=!0}),e.socket.on("disconnect",function(){e.connected=!1}),e}function i(){}var t=I((q(r,e).displayName="SingletonClass",r),e).prototype,n=r;return i.prototype=t,t.networkRx=function(e){return this.send(e)},t.fillMsg=function(e){return e},t.receive=function(e){return e.sender=e.sender.concat([this.actorId]),this.socket.emit("aktos-message",e)},r}(A),i}(),M=function(e){function r(e){var t=this instanceof i?this:new i;return r.superclass.apply(t,arguments),t.listenerFunctions=[],t.pinName=String(e),t.send({UpdateIoMessage:{}}),t}function i(){}var t=I((q(r,e).displayName="SwitchActor",r),e).prototype,n=r;return i.prototype=t,t.addListener=function(e){return this.listenerFunctions=this.listenerFunctions.concat([e])},t.handle_IoMessage=function(e){var t,n,r,i,s=[];if(e.pin_name===this.pinName){for(t=0,r=(n=this.listenerFunctions).length;t<r;++t)i=n[t],s.push(i(e));return s}},t.sendEvent=function(e){return this.send({IoMessage:{pin_name:this.pinName,val:e}})},r}(A),O(),Ractive.DEBUG=/unminified/.test(function(){}),_=new Ractive({template:"#app",el:"container"}),D=function(){$(".toggle-switch").each(function(){var e,t,n,r,i;e=$(this),t=e[0],n=e.prop("value"),r=M(n),e.change(function(){return r.sendEvent(this.checked)}),r.addListener(function(t){return e.prop("checked",t.val)}),i=new ToggleSwitch(t,"on","off"),r.addListener(function(e){var t;return t=i.fCallback,i.fCallback=null,e.val?i.on():i.off(),i.fCallback=t,t=null}),i.addListener(function(e){r.sendEvent(e)})})},P=function(){return $(".push-button").each(function(){var e,t,n;return e=$(this),t=e.data("pin-name"),n=M(t),e.on("mousedown touchstart",function(){return e.addClass("button-active-state"),n.sendEvent(!0),e.on("mouseleave",function(){return e.removeClass("button-active-state"),n.sendEvent(!1)})}),e.on("mouseup touchend touchcancel touchmove",function(){return e.removeClass("button-active-state"),n.sendEvent(!1),e.off("mouseleave")}),n.addListener(function(t){return t.val?e.addClass("button-active-state"):e.removeClass("button-active-state")})})},H=function(){return $(".status-led").each(function(){var e,t,n;return e=$(this),t=e.data("pin-name"),n=M(t),n.addListener(function(t){var n;return n=Ractive.getNodeInfo(e.get(0)),_.set(n.keypath+".state",t.val)})})},B=function(e,t){var n,r;return n=Ractive.getNodeInfo(e.get(0)),r=_.get(n.keypath)[t],r},j=function(e,t,n){var r;return r=Ractive.getNodeInfo(e.get(0)),_.set(r.keypath+"."+t,n)},F=function(){return $(".analog-display").each(function(){var e,t,n;return e=$(this),t=B(e,"channel"),n=M(t),n.addListener(function(t){return j(e,"value",t.val)})})},_.on("complete",function(){D(),P(),H(),F()}),C.on("connect",function(){_.set("connected",!0)}),C.on("disconnect",function(){console.log("disconnected..."),_.set("connected",!1)})}),require.register("init",function(e,t,n){t("app")}),require.register("lib/testlibrary",function(e,t,n){var r;r=function(){console.log("test lib is working!")},n.exports={test:r}}),require.register("weblib",function(e,t,n){var r,i,s,o,u,a,f,l;r=function(){return console.log("weblib library is working!")},i=function(e,t,n){$(e).each(function(){var e,r,i,s;e=$(this),r="mk-realtime-input.old-val",i=function(){return e.val()},s=e.attr("type"),(s!=null?s:void 8)&&e.attr("type")==="checkbox"&&(i=function(){return e.is(":checked")}),e.data(r,i()),e.bind("propertychange change click keyup input paste",function(s){var o;e.data(r)!==i()&&(e.data(r,i()),o=n(e),clearTimeout(e.data("timeout")),e.data("timeout",setTimeout(o,t)))})})},s=function(e){return tail(e).concat([head(e)])},o=function(e){return e.is(":checked")},u=function(e,t,n,r){function v(e){var n,i,s,u,a;n=$(e.target),i=n.data()["next-button"],s=n.data()["previous-button"],u="",u+="rb-event-handler: ",u+=n.attr("value")+", ",a=o(n),s.data().version>n.data().version&&(n.data().version=s.data().version),u+="state ",n.data()["old-value"]!==a?(u+="changed: ",u+=n.data()["old-value"],u+=" -> ",n.data().version+=1,t(n,e,r),n.data()["old-value"]=a,n.data().edge=!0):(u+=" not changed: ",n.data().edge=!1),u+=a,i.data().version<n.data().version&&i.trigger("chain"),console.log(u)}var i,u,a,f,l,c,h,p,d=[];i=[],$(e).children().each(function(){var e;e=$(this),e.attr("type")==="checkbox"&&i.push(e)}),u=s(i),a=s(u);for(f=0,l=i.length-1;f<=l;++f)c=f,u[c].data({"next-button":a[c],"previous-button":i[c],version:0,"old-value":o(u[c]),id:c,"group-id":e,edge:!1});for(f=0,h=i.length;f<h;++f)p=i[f],n(p,r),d.push(p.bind("propertychange click keyup chain",v));return d},a=function(e,t,n){var r,i,s,u,a;r=e,i=join(""),s=i([e.attr("value")," is changed to ",o(e).toString()]),u=e.data()["group-id"],a="",a+="rb-handler: ",a+=u+": ",a+="event.type: "+t.type,o(r)!==r.data()["old-value"]&&t.type!=="chain"&&n.emit("tweet",{user:u,text:s})},f=function(e,t){var n,r,i;n=e.data()["group-id"],r=e.attr("value"),i="",i+="radiobox: ",i+="handler added for ",i+=n+"."+r,t.on("tweet",function(t){var i,s,u,a,f;i="",i+="rb-receiver: ",i+=n+"."+r;if(t.user!==n)return i+=" this msg is NOT for me";s=split(" is changed to ",t.text),i+=", ",i+=join("->",s);if(s[0]===r){u=s[1]==="true",e.prop("checked",u),a=e;if(o(a)===!0){i+=" unchecking other buttons, ",f=a.data()["next-button"];while(f.data().id!==a.data().id)f.prop("checked",!1),f.trigger("chain"),f=f.data()["next-button"];return i+=" unchecking other buttons DONE."}}})},l=function(e,t){$("document").ready(function(){$(e).keypress(function(e){e.keyCode===13&&$(t).click()})})},n.exports={test:r,mkRealtimeInput:i,mkRadiobox:u,rotate:s,stateOf:o,radioboxHandler:a,radioboxListenerHandler:f,connectEnterToClick:l}})